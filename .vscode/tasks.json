{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "super-admin security build-check",
			"type": "shell",
			"command": "bash -lc 'set -e; if [ -d \"my-backend\" ]; then echo \"Backend exists\"; fi; if [ -d \"my-frontend\" ]; then cd my-frontend && jq -r .name package.json >/dev/null 2>&1 || true; echo \"Frontend exists\"; fi; echo DONE'",
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "temp-build-and-push-precheck",
			"type": "shell",
			"command": "bash -lc 'set -e; echo \"Node: $(node -v 2>/dev/null || echo missing)\"; echo \"NPM: $(npm -v 2>/dev/null || echo missing)\"; git rev-parse --is-inside-work-tree >/dev/null 2>&1 && echo \"Git repo: yes\" || echo \"Git repo: no\"; echo DONE'",
			"isBackground": false,
			"problemMatcher": [],
			"group": "build"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'",
			"problemMatcher": [
				"$tsc"
			],
			"group": "build"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'",
			"group": "build"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'",
			"group": "build"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'",
			"group": "build"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'"
		},
		{
			"label": "backend jest - calls api",
			"type": "shell",
			"command": "bash -lc 'cd \"my-backend\" && npx jest -c jest.config.cjs tests/calls.test.js --runInBand'",
			"group": "build"
		},
		{
			"label": "frontend type-check",
			"type": "shell",
			"command": "bash -lc 'cd \"my-frontend\" && npm run -s type-check'",
			"group": "build"
		},
		{
			"label": "local env precheck",
			"type": "shell",
			"command": "bash -lc 'set -e; echo \"Backend .env.local.example:\"; sed -n \"1,80p\" my-backend/.env.local.example 2>/dev/null || echo missing; echo; echo \"Frontend .env.local.example:\"; sed -n \"1,80p\" my-frontend/.env.local.example 2>/dev/null || echo missing; echo; echo DONE'",
			"group": "build"
		},
		{
			"label": "start backend (dev)",
			"type": "shell",
			"command": "bash -lc 'set -e; cp -n my-backend/.env.local.example my-backend/.env.local || true; (cd my-backend && PORT=5000 NODE_ENV=development node index.js)'",
			"isBackground": false,
			"group": "build"
		},
		{
			"label": "smoke test login /api/auth/login",
			"type": "shell",
			"command": "bash -lc 'set -e; curl -sS -i -X POST http://localhost:5000/api/auth/login -H \"Content-Type: application/json\" --data '{\"email\":\"demo_hub_incharge@bisman.demo\",\"password\":\"Demo@123\"}' | sed -n \"1,20p\"'",
			"group": "build"
		},
		{
			"label": "restart backend (dev)",
			"type": "shell",
			"command": "bash -lc 'pkill -f \"node index.js\" || true; sleep 0.5; (cd my-backend && PORT=5000 NODE_ENV=development node index.js)'",
			"isBackground": false,
			"group": "build"
		},
		{
			"label": "curl login after start",
			"type": "shell",
			"command": "bash -lc 'sleep 1; curl -sS -i -X POST http://localhost:5000/api/auth/login -H \"Content-Type: application/json\" --data '{\"email\":\"demo_hub_incharge@bisman.demo\",\"password\":\"Demo@123\"}' | sed -n \"1,200p\"'",
			"group": "build"
		},
		{
			"label": "curl login json proper",
			"type": "shell",
			"command": "bash -lc 'curl -sS -i -X POST http://localhost:5000/api/auth/login -H \"Content-Type: application/json\" --data \"{\\\"email\\\":\\\"demo_hub_incharge@bisman.demo\\\",\\\"password\\\":\\\"Demo@123\\\"}\" | sed -n \"1,200p\"'",
			"group": "build"
		},
		{
			"label": "frontend dev start",
			"type": "shell",
			"command": "bash -lc 'set -e; cp -n my-frontend/.env.local.example my-frontend/.env.local || true; (cd my-frontend && npm run -s dev &>/dev/null &) && sleep 2; echo STARTED'",
			"isBackground": false,
			"group": "build"
		}
	]
}