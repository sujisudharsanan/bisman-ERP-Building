# PgBouncer Environment Variables
# =================================
# Copy to .env and fill in values

# ============================================================================
# PostgreSQL Backend Connection (where PgBouncer connects TO)
# ============================================================================

# PostgreSQL host (RDS endpoint, Cloud SQL, or container name)
PG_HOST=your-postgres-host.region.rds.amazonaws.com

# PostgreSQL port
PG_PORT=5432

# Database name
PG_DATABASE=bisman_prod

# Database user (must exist in PostgreSQL and userlist.txt)
PG_USER=bisman_app

# Database password (used for PostgreSQL connection)
PG_PASSWORD=your-secure-database-password

# SSL mode for PostgreSQL connection
# Options: disable, allow, prefer, require, verify-ca, verify-full
PG_SSLMODE=require

# ============================================================================
# PgBouncer Settings
# ============================================================================

# Port PgBouncer listens on
PGBOUNCER_PORT=6432

# Connection pool size (per user/database pair)
PGBOUNCER_POOL_SIZE=20

# Maximum client connections to PgBouncer
PGBOUNCER_MAX_CLIENT_CONN=500

# Maximum connections to PostgreSQL (leave headroom for admin)
PGBOUNCER_MAX_DB_CONN=90

# Admin console password
PGBOUNCER_ADMIN_PASSWORD=admin-console-password

# Stats user password (for monitoring)
PGBOUNCER_STATS_PASSWORD=stats-password

# ============================================================================
# Application DATABASE_URL (what your app uses)
# ============================================================================

# For development (direct to Postgres)
# DATABASE_URL="postgresql://bisman_app:password@localhost:5432/bisman_prod"

# For production (via PgBouncer)
# Note: ?pgbouncer=true is required for Prisma compatibility
DATABASE_URL="postgresql://${PG_USER}:${PG_PASSWORD}@pgbouncer:${PGBOUNCER_PORT}/${PG_DATABASE}?pgbouncer=true&sslmode=require"

# ============================================================================
# AWS RDS Specific (if using RDS)
# ============================================================================

# RDS instance identifier
# AWS_RDS_INSTANCE=bisman-prod-db

# RDS region
# AWS_REGION=us-east-1

# Enable IAM authentication (alternative to password)
# AWS_RDS_IAM_AUTH=false
