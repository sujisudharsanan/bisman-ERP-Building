// ====================================================================
// EXTENDED USER PROFILE MODELS - ADD TO EXISTING SCHEMA
// ====================================================================
// Add these models to your existing prisma/schema.prisma file

// Enums
enum AddressType {
  PERMANENT
  OFFICE
  HOME
  CORRESPONDENCE
}

enum Gender {
  MALE
  FEMALE
  OTHER
  PREFER_NOT_TO_SAY
}

enum MaritalStatus {
  SINGLE
  MARRIED
  DIVORCED
  WIDOWED
}

enum KYCStatus {
  PENDING
  VERIFIED
  REJECTED
}

enum ProficiencyLevel {
  BEGINNER
  INTERMEDIATE
  ADVANCED
  EXPERT
}

// User Profile Table
model UserProfile {
  id                Int            @id @default(autoincrement())
  userId            Int            @unique @map("user_id")
  fullName          String?        @map("full_name") @db.VarChar(255)
  employeeCode      String?        @unique @map("employee_code") @db.VarChar(50)
  phone             String?        @db.VarChar(20)
  alternatePhone    String?        @map("alternate_phone") @db.VarChar(20)
  dateOfBirth       DateTime?      @map("date_of_birth") @db.Date
  gender            Gender?
  bloodGroup        String?        @map("blood_group") @db.VarChar(10)
  profilePicUrl     String?        @map("profile_pic_url") @db.Text
  fatherName        String?        @map("father_name") @db.VarChar(255)
  motherName        String?        @map("mother_name") @db.VarChar(255)
  maritalStatus     MaritalStatus? @map("marital_status")
  createdAt         DateTime       @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime       @updatedAt @map("updated_at") @db.Timestamp(6)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([employeeCode])
  @@map("user_profiles")
}

// User Addresses
model UserAddress {
  id          Int         @id @default(autoincrement())
  userId      Int         @map("user_id")
  type        AddressType
  line1       String      @db.VarChar(255)
  line2       String?     @db.VarChar(255)
  city        String      @db.VarChar(100)
  state       String      @db.VarChar(100)
  postalCode  String      @map("postal_code") @db.VarChar(20)
  country     String      @default("India") @db.VarChar(100)
  isDefault   Boolean     @default(false) @map("is_default")
  createdAt   DateTime    @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt   DateTime    @updatedAt @map("updated_at") @db.Timestamp(6)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([type])
  @@map("user_addresses")
}

// User KYC
model UserKYC {
  id                  Int       @id @default(autoincrement())
  userId              Int       @unique @map("user_id")
  panNumber           String?   @map("pan_number") @db.VarChar(20)
  aadhaarNumber       String?   @map("aadhaar_number") @db.VarChar(20)
  kycStatus           KYCStatus @default(PENDING) @map("kyc_status")
  panDocumentUrl      String?   @map("pan_document_url") @db.Text
  aadhaarDocumentUrl  String?   @map("aadhaar_document_url") @db.Text
  createdAt           DateTime  @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt           DateTime  @updatedAt @map("updated_at") @db.Timestamp(6)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([kycStatus])
  @@map("user_kyc")
}

// User Bank Accounts
model UserBankAccount {
  id                          Int      @id @default(autoincrement())
  userId                      Int      @map("user_id")
  accountHolderName           String   @map("account_holder_name") @db.VarChar(255)
  bankName                    String   @map("bank_name") @db.VarChar(255)
  branchName                  String   @map("branch_name") @db.VarChar(255)
  accountNumber               String   @map("account_number") @db.VarChar(50)
  ifscCode                    String   @map("ifsc_code") @db.VarChar(20)
  isPrimary                   Boolean  @default(false) @map("is_primary")
  cancelledChequeDocumentUrl  String?  @map("cancelled_cheque_document_url") @db.Text
  createdAt                   DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt                   DateTime @updatedAt @map("updated_at") @db.Timestamp(6)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([isPrimary])
  @@map("user_bank_accounts")
}

// User Education
model UserEducation {
  id                Int      @id @default(autoincrement())
  userId            Int      @map("user_id")
  degree            String   @db.VarChar(255)
  institutionName   String   @map("institution_name") @db.VarChar(255)
  yearOfPassing     Int      @map("year_of_passing")
  gradeOrPercentage String   @map("grade_or_percentage") @db.VarChar(50)
  createdAt         DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime @updatedAt @map("updated_at") @db.Timestamp(6)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@map("user_education")
}

// User Skills
model UserSkill {
  id                Int               @id @default(autoincrement())
  userId            Int               @map("user_id")
  skillName         String            @map("skill_name") @db.VarChar(255)
  proficiencyLevel  ProficiencyLevel  @map("proficiency_level")
  createdAt         DateTime          @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt         DateTime          @updatedAt @map("updated_at") @db.Timestamp(6)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@map("user_skills")
}

// User Achievements
model UserAchievement {
  id              Int      @id @default(autoincrement())
  userId          Int      @map("user_id")
  title           String   @db.VarChar(255)
  description     String?  @db.Text
  achievementDate DateTime @map("achievement_date") @db.Date
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamp(6)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@map("user_achievements")
}

// User Emergency Contacts
model UserEmergencyContact {
  id              Int      @id @default(autoincrement())
  userId          Int      @map("user_id")
  name            String   @db.VarChar(255)
  relationship    String   @db.VarChar(100)
  phone           String   @db.VarChar(20)
  alternatePhone  String?  @map("alternate_phone") @db.VarChar(20)
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamp(6)

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@map("user_emergency_contacts")
}

// Branches
model Branch {
  id            Int      @id @default(autoincrement())
  tenantId      String?  @map("tenant_id") @db.Uuid
  branchCode    String   @unique @map("branch_code") @db.VarChar(50)
  branchName    String   @map("branch_name") @db.VarChar(255)
  addressLine1  String   @map("address_line1") @db.VarChar(255)
  addressLine2  String?  @map("address_line2") @db.VarChar(255)
  city          String   @db.VarChar(100)
  state         String   @db.VarChar(100)
  postalCode    String   @map("postal_code") @db.VarChar(20)
  country       String   @default("India") @db.VarChar(100)
  isActive      Boolean  @default(true) @map("is_active")
  createdAt     DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt     DateTime @updatedAt @map("updated_at") @db.Timestamp(6)

  client        Client?       @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  userBranches  UserBranch[]

  @@index([tenantId])
  @@index([branchCode])
  @@map("branches")
}

// User Branches (Assignment)
model UserBranch {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  branchId  Int      @map("branch_id")
  isPrimary Boolean  @default(false) @map("is_primary")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamp(6)

  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  branch Branch @relation(fields: [branchId], references: [id], onDelete: Cascade)

  @@unique([userId, branchId])
  @@index([userId])
  @@index([branchId])
  @@map("user_branches")
}

// Add these relations to the existing User model:
// profile               UserProfile?
// addresses             UserAddress[]
// kyc                   UserKYC?
// bankAccounts          UserBankAccount[]
// education             UserEducation[]
// skills                UserSkill[]
// achievements          UserAchievement[]
// emergencyContacts     UserEmergencyContact[]
// branches              UserBranch[]
