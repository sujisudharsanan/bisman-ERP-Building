# ğŸ“Š Layout Registry System - Visual Architecture

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Application Root                          â”‚
â”‚                    <LayoutProvider>                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚            Registry State (React Context)              â”‚     â”‚
â”‚  â”‚  {                                                      â”‚     â”‚
â”‚  â”‚    "page-1": {                                         â”‚     â”‚
â”‚  â”‚      elements: [                                       â”‚     â”‚
â”‚  â”‚        { id: "el-1", x: 100, y: 100, w: 200, h: 150 },â”‚     â”‚
â”‚  â”‚        { id: "el-2", x: 350, y: 100, w: 250, h: 200 } â”‚     â”‚
â”‚  â”‚      ],                                                 â”‚     â”‚
â”‚  â”‚      gridSize: 20,                                     â”‚     â”‚
â”‚  â”‚      snapToGrid: true                                  â”‚     â”‚
â”‚  â”‚    },                                                   â”‚     â”‚
â”‚  â”‚    "page-2": { ... }                                   â”‚     â”‚
â”‚  â”‚  }                                                      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                              â”‚                                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚              â”‚                               â”‚                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚   Component A     â”‚         â”‚   Component B       â”‚       â”‚
â”‚    â”‚  usePageLayout()  â”‚         â”‚  usePageLayout()    â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Element Registration Flow

```
User Action: Add New Element
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  registerElement(element, autoPos)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â”€â”€ autoPos = false â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚                                      â”‚
             â””â”€â”€â”€ autoPos = true                    â”‚
                      â”‚                             â”‚
                      â–¼                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
         â”‚  Check for overlaps       â”‚              â”‚
         â”‚  validatePosition()       â”‚              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                     â”‚                              â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
            â”‚                 â”‚                     â”‚
         No Overlap      Has Overlap                â”‚
            â”‚                 â”‚                     â”‚
            â”‚                 â–¼                     â”‚
            â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
            â”‚      â”‚  findFreeSpot()     â”‚         â”‚
            â”‚      â”‚  - Spiral search    â”‚         â”‚
            â”‚      â”‚  - Try directions   â”‚         â”‚
            â”‚      â”‚  - Check each pos   â”‚         â”‚
            â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
            â”‚                 â”‚                     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Update Registry      â”‚
                  â”‚  - Add to elements[]  â”‚
                  â”‚  - Save to localStorageâ”‚
                  â”‚  - Trigger re-render  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Spiral Search Pattern

```
Start Position: (100, 100)
Increment: 20px
Max Attempts: 100

Iteration 1 (distance = 20):
  â†’ Try down:      (100, 120)  âŒ Occupied
  â†’ Try right:     (120, 100)  âŒ Occupied
  â†’ Try diagonal:  (120, 120)  âŒ Occupied
  â†’ Try up:        (100, 80)   âŒ Out of bounds
  â†’ Try left:      (80, 100)   âŒ Occupied
  â†’ Try up-left:   (80, 80)    âŒ Out of bounds
  â†’ Try up-right:  (120, 80)   âŒ Out of bounds
  â†’ Try down-left: (80, 120)   âŒ Occupied

Iteration 2 (distance = 40):
  â†’ Try down:      (100, 140)  âŒ Occupied
  â†’ Try right:     (140, 100)  âœ… FREE! â† Use this

Result: Element placed at (140, 100)
```

## ğŸ“ Overlap Detection Logic

```
Element A:                  Element B:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚            â”‚             â”‚
â”‚   x: 100    â”‚            â”‚   x: 200    â”‚
â”‚   y: 100    â”‚            â”‚   y: 100    â”‚
â”‚   w: 200    â”‚            â”‚   w: 200    â”‚
â”‚   h: 150    â”‚            â”‚   h: 150    â”‚
â”‚             â”‚            â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  (100, 100)                 (200, 100)
      to                         to
  (300, 250)                 (400, 250)

Overlap Check:
  A.x + A.width = 300
  B.x = 200
  300 > 200? YES â†’ Elements overlap horizontally

  A.y + A.height = 250
  B.y = 100
  250 > 100? YES â†’ Elements overlap vertically

  RESULT: âŒ OVERLAPPING

If elements don't overlap horizontally OR vertically:
  RESULT: âœ… NO OVERLAP
```

## ğŸ¨ Visual Debugger States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Debug Mode: ON                      â”‚
â”‚                  (Press Ctrl+Shift+L)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚   ğŸŸ¢ Green Border                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚   â”‚                  â”‚  â† No overlaps, valid position  â”‚
â”‚   â”‚   Element A      â”‚                                  â”‚
â”‚   â”‚   200 Ã— 150      â”‚                                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚   (100, 100)                                            â”‚
â”‚                                                          â”‚
â”‚   ğŸ”´ Red Border                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚   â”‚                  â”‚  â† Overlaps with another element â”‚
â”‚   â”‚   Element B      â”‚     âš ï¸ Warning shown             â”‚
â”‚   â”‚   250 Ã— 200      â”‚                                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚   (150, 120)                                            â”‚
â”‚                                                          â”‚
â”‚   ğŸ”µ Blue Border (Selected)                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚   â”‚  â—            â—  â”‚  â† Resize handles visible       â”‚
â”‚   â”‚   Element C      â”‚     Details shown in panel      â”‚
â”‚   â”‚   300 Ã— 180      â”‚                                  â”‚
â”‚   â”‚  â—            â—  â”‚                                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚   (400, 100)                                            â”‚
â”‚                                                          â”‚
â”‚   ğŸ“ Grid (when enabled)                                â”‚
â”‚   â”Š â”Š â”Š â”Š â”Š â”Š â”Š â”Š â”Š   â† 20px grid overlay              â”‚
â”‚   â”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ                                      â”‚
â”‚   â”Š â”Š â”Š â”Š â”Š â”Š â”Š â”Š â”Š                                    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ State Management Flow

```
User Interaction
      â”‚
      â”œâ”€â”€â”€ Add Element â”€â”€â”€â”€â”€â”€â”€â”
      â”œâ”€â”€â”€ Move Element â”€â”€â”€â”€â”€â”€â”¤
      â”œâ”€â”€â”€ Delete Element â”€â”€â”€â”€â”¤
      â”œâ”€â”€â”€ Update Settings â”€â”€â”€â”¤
      â”‚                        â”‚
      â–¼                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React Context   â”‚    â”‚  Hook Function   â”‚
â”‚  setRegistry()   â”‚â—„â”€â”€â”€â”‚  registerElement â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  updateElement   â”‚
         â”‚              â”‚  removeElement   â”‚
         â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Registry State  â”‚
â”‚  (in memory)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â–º Component Re-renders
         â”‚
         â””â”€â”€â”€â”€â”€â–º Debounced Save
                      â”‚
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  localStorage    â”‚
              â”‚  persist data    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Hook Usage Patterns

```typescript
// Pattern 1: Page-Specific Hook (Recommended)
const { elements, registerElement } = usePageLayout('dashboard');

// Pattern 2: Global Registry Access
const { registry, getElements } = useLayout();
const elements = getElements('dashboard');

// Pattern 3: Validation Only
const { validatePosition } = usePageLayout('dashboard');
const isValid = validatePosition(element);

// Pattern 4: Smart Placement
const { getSuggestions, registerElement } = usePageLayout('dashboard');
const spots = getSuggestions(refElement, { width: 200, height: 150 });
const freeSpot = spots.find(s => s.isFree);
```

## ğŸ“Š Data Structure

```typescript
// Registry Structure
{
  "page-id": {
    elements: [
      {
        id: "unique-id",
        x: number,              // X coordinate
        y: number,              // Y coordinate
        width: number,          // Width in pixels
        height: number,         // Height in pixels
        type?: string,          // Element type (optional)
        zIndex?: number,        // Z-index (optional)
        locked?: boolean        // Prevent moves (optional)
      }
    ],
    gridSize: number,          // Grid cell size
    snapToGrid: boolean        // Enable grid snapping
  }
}

// Validation Result
{
  valid: boolean,              // Is position valid?
  overlaps: ElementBounds[],   // Overlapping elements
  message?: string             // Error message
}

// Suggestion
{
  x: number,                   // X coordinate
  y: number,                   // Y coordinate
  direction: string,           // 'below' | 'right' | 'above' | 'left'
  isFree: boolean             // Is this position available?
}
```

## ğŸ® Demo Component Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LayoutRegistryDemo                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              â”‚  â”‚                                     â”‚  â”‚
â”‚  â”‚  Control     â”‚  â”‚         Canvas                     â”‚  â”‚
â”‚  â”‚  Panel       â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”‚          â”‚  â”‚          â”‚       â”‚  â”‚
â”‚  â”‚  â€¢ Stats     â”‚  â”‚  â”‚ Widget A â”‚  â”‚ Widget B â”‚       â”‚  â”‚
â”‚  â”‚  â€¢ Type      â”‚  â”‚  â”‚          â”‚  â”‚          â”‚       â”‚  â”‚
â”‚  â”‚  â€¢ Settings  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â”‚  â€¢ Actions   â”‚  â”‚                                     â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”‚          â”‚                      â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”‚ Widget C â”‚                      â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â”‚          â”‚                      â”‚  â”‚
â”‚  â”‚              â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   LayoutDebugger        â”‚
              â”‚   (Toggle: Ctrl+Shift+L)â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Integration Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Existing App                          â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Root Layout                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚         <LayoutProvider>                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚         Your App Content             â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   SuperAdminControlPanel       â”‚ â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   usePageLayout('super-admin') â”‚ â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   Dashboard                    â”‚ â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   usePageLayout('dashboard')   â”‚ â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   LayoutDebugger               â”‚ â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚   (Development only)           â”‚ â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Execution Flow Timeline

```
Time â”‚ Action                    â”‚ Component              â”‚ State Change
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
tâ‚€   â”‚ App loads                 â”‚ LayoutProvider         â”‚ Load from storage
tâ‚   â”‚ User adds element         â”‚ Component              â”‚ registerElement()
tâ‚‚   â”‚ Check overlaps            â”‚ layoutRegistry         â”‚ validatePosition()
tâ‚ƒ   â”‚ Find free spot            â”‚ layoutRegistry         â”‚ findFreeSpot()
tâ‚„   â”‚ Update registry           â”‚ LayoutProvider         â”‚ setRegistry()
tâ‚…   â”‚ Components re-render      â”‚ All consumers          â”‚ Display elements
tâ‚†   â”‚ Debounce timer (1s)       â”‚ LayoutProvider         â”‚ Wait...
tâ‚‡   â”‚ Save to localStorage      â”‚ LayoutProvider         â”‚ Persist data
tâ‚ˆ   â”‚ User toggles debugger     â”‚ LayoutDebugger         â”‚ Show overlay
tâ‚‰   â”‚ User drags element        â”‚ Component              â”‚ updateElement()
tâ‚â‚€  â”‚ Validate new position     â”‚ layoutRegistry         â”‚ Check overlaps
tâ‚â‚  â”‚ Update if valid           â”‚ LayoutProvider         â”‚ setRegistry()
tâ‚â‚‚  â”‚ Save after debounce       â”‚ LayoutProvider         â”‚ Persist data
```

## ğŸ“ˆ Performance Characteristics

```
Operation            â”‚ Time Complexity â”‚ Space Complexity â”‚ Notes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Add Element          â”‚ O(n)            â”‚ O(1)             â”‚ Check overlaps
Remove Element       â”‚ O(n)            â”‚ O(1)             â”‚ Filter array
Update Element       â”‚ O(n)            â”‚ O(1)             â”‚ Find + update
Find Free Spot       â”‚ O(n Ã— attempts) â”‚ O(1)             â”‚ Spiral search
Validate Position    â”‚ O(n)            â”‚ O(1)             â”‚ Check all
Get Suggestions      â”‚ O(n Ã— 4)        â”‚ O(1)             â”‚ 4 directions
Render Elements      â”‚ O(n)            â”‚ O(n)             â”‚ Map array
Save to Storage      â”‚ O(n)            â”‚ O(n)             â”‚ JSON.stringify

Where n = number of elements on page
```

## ğŸ¯ Key Algorithms Visualized

### Grid Snapping
```
Before Snap:
  Element at (145, 233)
  Grid size: 20px

Calculation:
  x_snapped = Math.round(145 / 20) * 20 = 140
  y_snapped = Math.round(233 / 20) * 20 = 240

After Snap:
  Element at (140, 240)

Visual:
  Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·
  â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚ â”‚  Grid: 20px cells
  Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·
  â”‚ â”‚ â”‚ [Element] â”‚  Snapped to nearest grid point
  Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·â”€Â·
```

---

**This visual guide shows the complete architecture and flow of the Layout Registry System.**

For implementation details, see:
- `LAYOUT_REGISTRY_README.md` - Quick start
- `LAYOUT_REGISTRY_DOCS.md` - Full documentation
- `LAYOUT_REGISTRY_INTEGRATION.md` - Integration guide
