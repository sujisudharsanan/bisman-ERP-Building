version: '3.8'

services:
  backend:
    # Development overrides: mount local source and run dev server only
    command: sh -c "npm run dev"
    volumes:
      - ./my-backend:/usr/src/app:delegated
      - /usr/src/app/node_modules
    environment:
      # Use internal compose network host for Postgres
      NODE_ENV: development
      PORT: 3000
    depends_on:
      - postgres
